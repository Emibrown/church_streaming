<%- include('../header'); -%>

<div class="content">
    <div class="container">
      <div class="block">
          <h2 class="block-title"><strong style="text-transform: none; font-weight: 100;">FAITH</strong><span> TV</span></h2>
          <div class="mytbn login register">
              <div class="container">
                  <div class="row">
                      <div class="col-md-8 col-md-offset-2">
                          <div class="item">
                              <h4 style="text-align:center">LOGIN</h4>
                              <div class="row">
                                <div style = "text-align:center; color:red;" id="alertBox" role="alert"></div>
                                  <div class="col-sm-12">
                                      <div class="tbl form">
                                          <div class="tbl-cell" id="rgstrForm">
                                              <form id = "login-form">
                                                  <div class="form-group">
                                                      <label for="email" class="sr-only">Email</label>
                                                      <div class="input-group">
                                                          <span class="input-group-addon">
                                                              <em class="fa fa-fw fa-envelope"></em>
                                                          </span>
                                                          <input value="" id="email" name="email" type="email" class="form-control" placeholder="Enter email">                                                        
                                                     </div>
                                                  </div>
                                                  <div class="form-group">
                                                      <label for="password" class="sr-only">Password</label>
                                                      <div class="input-group">
                                                          <span class="input-group-addon">
                                                              <em class="fa fa-fw fa-envelope"></em>
                                                          </span>
                                                          <input value="" id="password" name="password" type="password" class="form-control" placeholder="Enter password">                                                        
                                                        </div>
                                                  </div>                              
                                                  <div class="form-group">
                                                      <button style = "width:190px" class="btn btn-primary">Login</button>
                                                 </div> 
                                            </form>
                                            </div> <!-- /.tbl-cell -->
                                      </div> <!-- /.tbl -->
                                  </div> <!-- /.col -->
                                </div>
                                    <hr class= "item-footer">
                                    <div class="row">
                                      <div style = "text-align:center">
                                        <p>OR</p>
                                        <p>LOGIN WITH</p>
                                      </div>
                                  <div style = "text-align:center" class = "col-lg-12">
                                    <button class="loginBtn loginBtn--facebook">
                                     <a style = "color:white" href ="/auth/facebook" >Login with Facebook</a>
                                  </button>
                                  <!-- <button class="loginBtn loginBtn--google">
                                      Login with Google
                                  </button> -->
                                </div>
                              </div> <!-- /.row -->
                              <p class="item-footer">Not registered? <a href="/register">Sign up</a></p>
                              <p class="item-footer">Forgot password? <a href="/forgot">Forgot password</a></p>

                          </div> <!-- /.item -->
                      </div> <!-- /.col -->
                  </div> <!-- /.row -->
              </div> <!-- /.container -->
          </div> <!-- /.mytbn -->
      </div> <!-- /.block -->
      
  </div> <!-- /.container -->
</div> <!-- /.content -->
<%- include('../footer'); -%>
<%- include('../js'); -%>
<script>
    $('#login-form').validate({
    rules: {
        email: {
        required: true,
        email: true,
      },
        password: 'required',
    },
    messages: {
        title: 'Email is required',
        password: 'Please enter password',
    },
    errorPlacement: function(error, element) {
        error.appendTo(element.parent("div").parent("div") );
    },
    submitHandler: () => {
   
     $.ajax({
         url: '/login',
         type: 'post',
         dataType: 'json',
         data: {
            'email': $("#email").val(),
            'password': $("#password").val(),
         },
         success: function(data) {
            var url = "/";    
            $(location).attr('href',url);
         },
         error: function(data) {
            $("#alertBox").show();
            $("#alertBox").text(data.responseJSON.message);
         },
        });
       }
    });
    $(document).on('submit', '#login-form', (event) => {
    $(document).ready(function (){
    event.preventDefault();
  
    
  });
  });
</script>
  
<%- include('../../end'); -%>